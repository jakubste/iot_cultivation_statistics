{% extends 'base.html' %}

{% block title %}
    Statystyki uprawy „{{ plant }}”
{% endblock %}

{% block content %}

    <p style="float:right">
        <a href="{% url 'stats:plant_settings' plant.slug %}">
            <button type="button" class="btn btn-warning">
                <span class="glyphicon glyphicon-cog"></span>
                Ustawienia rośliny
            </button>
        </a>
    </p>

    <div class="col-md-12">
        <canvas id="myChart" height="500px" width="700px"></canvas>
    </div>

    <script type="text/javascript">

        $.get('{% url 'stats:chart' plant.slug %}', function (data) {
            var ctx = $("#myChart").get(0).getContext("2d");
            new Chart(ctx).Line(data, {
                responsive: true
            });
        });
    </script>

    <table class="table">
        <tr>
            <th>Data</th>
            <th>Temperatura</th>
            <th>Wilgotność powietrza</th>
            <th>Wilgotność gleby</th>
        </tr>
        {% for measurement in measurments %}
            <tr>
                <td>{{ measurement.date }}</td>
                <td>{{ measurement.temperature }}</td>
                <td>{{ measurement.air_humidity }}</td>
                <td>{{ measurement.soil_humidity }}</td>
            </tr>
        {% endfor %}
    </table>

    <p style="float:right">
        <a href="{% url 'stats:new_measurement' plant.slug %}">
            <button type="button" class="btn btn-success">
                <span class="glyphicon glyphicon-plus"></span>
                Dodaj pomiar
            </button>
        </a>
    </p>

{% endblock %}
